<form *ngIf="!isLoggedIn" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
    <div>
        <label for="email">Email</label>
        <input type="text" name="email" [(ngModel)]="form.email" required #email="ngModel"/>
    </div>
    <div role="alert" *ngIf="email.errors && f.submitted">Email is required</div>
    <div>
        <label for="password">Password</label>
        <input type="password" name="password" [(ngModel)]="form.password" required minlength="8" #password="ngModel"/>
    </div>
    <div role="alert" *ngIf="password.errors && f.submitted">
        <div *ngIf="password.errors['required']">Password is required</div>
        <div *ngIf="password.errors['minlength']">Password must have at least 8 characters</div>
    </div>
    <div>
        <button type="submit">Login</button>
    </div>
    <div role="alert" *ngIf="f.submitted && isLoginFailed">Login failed: {{ errorMessage }}</div>
</form>
<div *ngIf="isLoggedIn">Logged in as {{ role }}</div>